<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<style type="text/css">
		body,
		html {
			width: 100%;
			height: 100%;
			margin: 0;
			font-family: "微软雅黑";
		}

		#dituContent {
			width: 100%;
			height: 100%;
		}
	</style>
	<script type="text/javascript" src="http://api.map.baidu.com/api?v=3.0&ak=notj5jZfhhHQvej1zwAkF1V7pU4jGtY7"></script>
	<title>闪烁</title>
</head>

<body>
	<div id="dituContent"></div>
</body>

</html>
<script type="text/javascript">
	// 百度地图API功能
	var mp = new BMap.Map("dituContent");//创建地图实例
	mp.centerAndZoom(new BMap.Point(102.728547, 25.043682), 15);//地图初始化，设置中心点坐标和地图级别。

	mp.enableScrollWheelZoom();//启用鼠标滚轮放大缩小

	var mapStyle = {
        style: "dark"  //设置地图风格为高端黑					
    }
    mp.setMapStyle(mapStyle);

	
	//定义自定义覆盖物的构造函数  
	function ComplexCustomOverlay(point) {
		this._point = point;

	}
	// 继承API的BMap.Overlay  
	ComplexCustomOverlay.prototype = new BMap.Overlay();

	// 实现初始化方法  
	ComplexCustomOverlay.prototype.initialize = function (map) {
		// 保存map对象实例 
		this._map = map;
		// 创建div元素，作为自定义覆盖物的容器  
		var div = this._div = document.createElement("div");
		div.style.position = "absolute";
		div.style.zIndex = BMap.Overlay.getZIndex(this._point.lat);

		// 可以根据参数设置元素外观
		div.style.height = "35px";
		div.style.width = "35px";

		var arrow = this._arrow = document.createElement("img");
		arrow.src = "http://www.yantiansf.cn/mapImage/1.gif";
		arrow.style.width = "35px";
		arrow.style.height = "35px";
		arrow.style.top = "22px";
		arrow.style.left = "10px";
		div.appendChild(arrow);

		// 将div添加到覆盖物容器中  
		mp.getPanes().labelPane.appendChild(div);
		return div;

	}

	// 实现绘制方法
	ComplexCustomOverlay.prototype.draw = function () {
		var map = this._map;
		var pixel = map.pointToOverlayPixel(this._point);
		this._div.style.left = pixel.x - parseInt(this._arrow.style.left) + "px";
		this._div.style.top = pixel.y - 30 + "px";
	}


	ComplexCustomOverlay.prototype.addEventListener = function (event, fun) {
		this._div['on' + event] = fun;
	}

	var aaa = new ComplexCustomOverlay(new BMap.Point(102.715466, 25.041667));
	mp.addOverlay(aaa);//将标注添加到地图中

	var bbb = new ComplexCustomOverlay(new BMap.Point(102.717092, 25.041367));
	mp.addOverlay(bbb);//将标注添加到地图中

	var ccc = new ComplexCustomOverlay(new BMap.Point(102.71881, 25.043649));
	mp.addOverlay(ccc);//将标注添加到地图中

	

</script>